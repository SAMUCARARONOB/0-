local Players = game:GetService("Players")
local player = Players.LocalPlayer

local RANOX = {}

function RANOX:CreateWindow(config)
    local Window = {}

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "RANOX_UI"
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 480, 0, 300)
    mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    mainFrame.Parent = screenGui
    Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 8)

    local title = Instance.new("TextLabel", mainFrame)
    title.Size = UDim2.new(1, 0, 0, 25)
    title.BackgroundTransparency = 1
    title.Text = config.Title or "RANOX Hub"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Font = Enum.Font.Gotham
    title.TextSize = 18
    title.TextXAlignment = Enum.TextXAlignment.Center

    local sidebar = Instance.new("ScrollingFrame", mainFrame)
    sidebar.Size = UDim2.new(0, 75, 1, -25)
    sidebar.Position = UDim2.new(0, 0, 0, 25)
    sidebar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    sidebar.CanvasSize = UDim2.new(0, 0, 0, 0)
    sidebar.AutomaticCanvasSize = Enum.AutomaticSize.Y
    sidebar.ScrollBarThickness = 3
    Instance.new("UICorner", sidebar).CornerRadius = UDim.new(0, 6)

    local sidebarLayout = Instance.new("UIListLayout", sidebar)
    sidebarLayout.SortOrder = Enum.SortOrder.LayoutOrder
    sidebarLayout.Padding = UDim.new(0, 5)

    local tabButtons = {}
    local pages = {}

    function Window:CreateTab(tabName)
        local tabBtn = Instance.new("TextButton", sidebar)
        tabBtn.Size = UDim2.new(1, -10, 0, 18)
        tabBtn.Text = tabName
        tabBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        Instance.new("UICorner", tabBtn).CornerRadius = UDim.new(0, 5)

        local tabPage = Instance.new("Frame", mainFrame)
        tabPage.Name = tabName
        tabPage.Size = UDim2.new(1, -85, 1, -35)
        tabPage.BackgroundTransparency = 1
        tabPage.Visible = false

        pages[tabName] = tabPage

        tabBtn.MouseButton1Click:Connect(function()
            for _, page in pairs(pages) do
                page.Visible = false
            end
            tabPage.Visible = true
        end)

        tabButtons[tabName] = tabBtn
        return tabPage
    end

    function Window:CreateButton(tabName, text, callback)
        local tab = pages[tabName]
        if not tab then return end

        local btn = Instance.new("TextButton", tab)
        btn.Size = UDim2.new(1, -20, 0, 36)
        btn.Text = text
        btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

        btn.MouseButton1Click:Connect(function()
            pcall(callback)
        end)

        return btn
    end

    return Window
end

return RANOX
