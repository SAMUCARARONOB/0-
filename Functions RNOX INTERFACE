local RNOX = {}

function RNOX:CreateWindow(params)
    local gui = Instance.new("ScreenGui")
    gui.Parent = game.Players.LocalPlayer.PlayerGui
    gui.ResetOnSpawn = false

    local baseFrame = Instance.new("Frame")
    baseFrame.Size = UDim2.new(0, 275, 0, 325)
    baseFrame.Position = UDim2.new(0.5, -225, 0.5, -175)
    baseFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    baseFrame.BorderSizePixel = 0
    baseFrame.Active = true
    baseFrame.Draggable = true
    baseFrame.Parent = gui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0.1, 0)
    corner.Parent = baseFrame

    local header = Instance.new("TextLabel")
    header.Size = UDim2.new(1, -20, 0.25, 0)
    header.Position = UDim2.new(0, 10, 0, -5)
    header.BackgroundColor3 = params.TitleBackgroundColor or Color3.fromRGB(0, 0, 0)
    header.BackgroundTransparency = 1
    header.Text = params.Name or "RNOX Interface"
    header.TextColor3 = params.TitleTextColor or Color3.fromRGB(10, 255, 10)
    header.Font = Enum.Font.GothamBold
    header.TextSize = 25
    header.TextWrapped = true
    header.Parent = baseFrame

    local cornerHeader = Instance.new("UICorner")
    cornerHeader.CornerRadius = UDim.new(0.1, 0)
    cornerHeader.Parent = header

    local tabScrollFrame = Instance.new("ScrollingFrame")
    tabScrollFrame.Size = UDim2.new(1, 0, 0.065, 0)
    tabScrollFrame.Position = UDim2.new(0, 0, 0.21, 0)
    tabScrollFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    tabScrollFrame.ScrollBarThickness = 8
    tabScrollFrame.HorizontalScrollBarInset = Enum.ScrollBarInset.ScrollBar
    tabScrollFrame.VerticalScrollBarInset = Enum.ScrollBarInset.Always
    tabScrollFrame.Parent = baseFrame

    local cornerTabFrame = Instance.new("UICorner")
    cornerTabFrame.CornerRadius = UDim.new(0.1, 0)
    cornerTabFrame.Parent = tabScrollFrame

    local tabLayout = Instance.new("UIListLayout")
    tabLayout.FillDirection = Enum.FillDirection.Horizontal
    tabLayout.Padding = UDim.new(0.02, 0)
    tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabLayout.Parent = tabScrollFrame

    tabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        tabScrollFrame.CanvasSize = UDim2.new(0, tabLayout.AbsoluteContentSize.X + 10, 0, 0)
    end)

    local window = {
        gui = gui,
        baseFrame = baseFrame,
        header = header,
        tabScrollFrame = tabScrollFrame,
        tabs = {}
    }

    function window:SetTitleColor(color)
        self.header.TextColor3 = color
    end

    function window:CreateTab(params)
        local tabContent = Instance.new("ScrollingFrame")
        tabContent.Size = UDim2.new(1, 0, 0.65, 0)
        tabContent.Position = UDim2.new(0, 0, 0.27, 0)
        tabContent.BackgroundColor3 = params.Color or Color3.fromRGB(17, 17, 17)
        tabContent.Visible = false
        tabContent.ScrollBarThickness = 10
        tabContent.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar
        tabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
        tabContent.Parent = self.baseFrame

        local cornerTabContent = Instance.new("UICorner")
        cornerTabContent.CornerRadius = UDim.new(0.1, 0)
        cornerTabContent.Parent = tabContent

        local gridLayout = Instance.new("UIGridLayout")
        gridLayout.CellPadding = UDim2.new(0.02, 0, 0.02, 0)
        gridLayout.CellSize = UDim2.new(1 / (params.Columns or 1), -10, 0.1, 0)
        gridLayout.SortOrder = Enum.SortOrder.LayoutOrder
        gridLayout.Parent = tabContent

        local tabButton = Instance.new("TextButton")
        tabButton.Text = params.Name or "Aba"
        tabButton.Size = UDim2.new(0, 95, 0.95, 0)
        tabButton.BackgroundColor3 = params.ButtonColor or Color3.fromRGB(70, 70, 70)
        tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabButton.Font = Enum.Font.GothamBold
        tabButton.TextSize = 15

        local cornerTabButton = Instance.new("UICorner")
        cornerTabButton.CornerRadius = UDim.new(0.2, 0)
        cornerTabButton.Parent = tabButton

        tabButton.MouseButton1Click:Connect(function()
            for _, tab in pairs(self.tabs) do
                tab.Visible = false
            end
            tabContent.Visible = true
        end)

        tabButton.Parent = self.tabScrollFrame
        table.insert(self.tabs, tabContent)

        if params.Default then
            tabContent.Visible = true
        end

        return tabContent
    end

    function window:CreateButton(parent, params)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0.8, 0, 0.1, 0)
        button.Text = params.Name or "Bot√£o"
        button.BackgroundColor3 = params.Color or Color3.fromRGB(30, 30, 30)
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.Font = Enum.Font.Gotham
        button.TextSize = 18
        button.TextWrapped = true
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0.1, 0)
        corner.Parent = button
        button.MouseButton1Click:Connect(function()
            if params.Callback then
                params.Callback()
            end
        end)
        button.Parent = parent
    end

    function window:CreateToggle(parent, params)
        local toggle = Instance.new("TextButton")
        toggle.Size = UDim2.new(0.8, 0, 0.1, 0)
        toggle.Text = params.Name or "Toggle"
        toggle.BackgroundColor3 = params.Color or Color3.fromRGB(30, 30, 30)
        toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
        toggle.Font = Enum.Font.GothamBold
        toggle.TextSize = 18
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0.1, 0)
        corner.Parent = toggle
        local isActive = params.CurrentValue or false
        toggle.MouseButton1Click:Connect(function()
            isActive = not isActive
            toggle.Text = isActive and "Ativado" or "Desativado"
            if params.Callback then
                params.Callback(isActive)
            end
        end)
        toggle.Parent = parent
    end

    return window
end

return RNOX
