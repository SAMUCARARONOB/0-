local RNOX = {}

function RNOX:CreateWindow(params)
    local gui = Instance.new("ScreenGui")
    gui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    gui.ResetOnSpawn = false

    -- Base da Interface
    local interfaceFrame = Instance.new("Frame")
    interfaceFrame.Size = UDim2.new(0, 0, 0, 0) -- Inicia invisível (para animação de entrada)
    interfaceFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    interfaceFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    interfaceFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    interfaceFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
    interfaceFrame.BorderSizePixel = 1
    interfaceFrame.Visible = true
    interfaceFrame.Parent = gui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0.05, 0) -- Borda arredondada suave
    corner.Parent = interfaceFrame

    -- Texto inicial de carregamento
    local loadingText = Instance.new("TextLabel")
    loadingText.Size = UDim2.new(1, 0, 0.2, 0)
    loadingText.Position = UDim2.new(0, 0, 0.4, 0)
    loadingText.Text = params.LoadingTitle or "Carregando..."
    loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
    loadingText.BackgroundTransparency = 1
    loadingText.Font = Enum.Font.GothamBold
    loadingText.TextSize = 20
    loadingText.Parent = interfaceFrame

    local subtitleText = Instance.new("TextLabel")
    subtitleText.Size = UDim2.new(1, 0, 0.15, 0)
    subtitleText.Position = UDim2.new(0, 0, 0.6, 0)
    subtitleText.Text = params.LoadingSubtitle or "RNOX"
    subtitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
    subtitleText.BackgroundTransparency = 1
    subtitleText.Font = Enum.Font.GothamBold
    subtitleText.TextSize = 24
    subtitleText.Parent = interfaceFrame

    -- Botão de ocultar
    local hideButton = Instance.new("ImageButton")
    hideButton.Size = UDim2.new(0, 30, 0, 30)
    hideButton.Position = UDim2.new(1, -40, 0, 10)
    hideButton.AnchorPoint = Vector2.new(1, 0)
    hideButton.Image = "rbxassetid://6035047409"
    hideButton.BackgroundTransparency = 1
    hideButton.Parent = interfaceFrame

    -- Bola de menu para reexibir
    local ballButton = Instance.new("ImageButton")
    ballButton.Size = UDim2.new(0.05, 0, 0.1, 0)
    ballButton.AnchorPoint = Vector2.new(0.5, 0.5)
    ballButton.Position = UDim2.new(0.1, 0, 0.9, 0)
    ballButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    ballButton.Image = "rbxassetid://6337069410"
    ballButton.BackgroundTransparency = 0
    ballButton.Visible = false
    ballButton.Active = true
    ballButton.Draggable = true
    ballButton.Parent = gui

    local ballCorner = Instance.new("UICorner")
    ballCorner.CornerRadius = UDim.new(0.5, 0)
    ballCorner.Parent = ballButton

    -- Animação de entrada
    interfaceFrame:TweenSize(UDim2.new(0, 450, 0, 350), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 1, true, function()
        wait(0.5)
        loadingText.Visible = false
        subtitleText.Visible = false
    end)

    -- Ocultar a interface
    hideButton.MouseButton1Click:Connect(function()
        interfaceFrame:TweenSize(UDim2.new(0, 0, 0, 0), Enum.EasingDirection.In, Enum.EasingStyle.Quad, 0.3, true, function()
            interfaceFrame.Visible = false
            ballButton.Visible = true
        end)
    end)

    -- Reexibir a interface
    ballButton.MouseButton1Click:Connect(function()
        ballButton.Visible = false
        interfaceFrame.Visible = true
        interfaceFrame:TweenSize(UDim2.new(0, 450, 0, 350), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.3, true)
    end)

    -- Métodos da interface
    return {
        CreateButton = function(params)
            local button = Instance.new("TextButton")
            button.Size = UDim2.new(0.8, 0, 0.1, 0)
            button.Text = params.Name or "Botão"
            button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            button.TextColor3 = Color3.fromRGB(255, 255, 255)
            button.Font = Enum.Font.GothamBold
            button.TextSize = 18
            button.Parent = interfaceFrame

            button.MouseButton1Click:Connect(function()
                if params.Callback then
                    params.Callback()
                end
            end)
        end,

        CreateToggle = function(params)
            local toggleFrame = Instance.new("Frame")
            toggleFrame.Size = UDim2.new(0.8, 0, 0.1, 0)
            toggleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            toggleFrame.Parent = interfaceFrame

            local label = Instance.new("TextLabel")
            label.Text = params.Name or "Toggle"
            label.Size = UDim2.new(0.7, 0, 1, 0)
            label.TextColor3 = Color3.fromRGB(255, 255, 255)
            label.Font = Enum.Font.Gotham
            label.TextSize = 16
            label.BackgroundTransparency = 1
            label.Parent = toggleFrame

            local icon = Instance.new("ImageButton")
            icon.Size = UDim2.new(0.2, 0, 0.8, 0)
            icon.Position = UDim2.new(0.75, 0, 0.1, 0)
            icon.Image = params.Icon or "rbxassetid://14293471713"
            icon.ImageColor3 = params.CurrentValue and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
            icon.BackgroundTransparency = 1
            icon.Parent = toggleFrame

            local isActive = params.CurrentValue or false
            icon.MouseButton1Click:Connect(function()
                isActive = not isActive
                icon.ImageColor3 = isActive and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
                if params.Callback then
                    params.Callback(isActive)
                end
            end)
        end
    }
end

return RNOX
