local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local RANOX = {}

function RANOX:CreateWindow(config)
	local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
	ScreenGui.Name = "RANOX_UI"
	ScreenGui.ResetOnSpawn = false

	local MainFrame = Instance.new("Frame", ScreenGui)
	MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
	MainFrame.Size = UDim2.new(0, 500, 0, 420)
	MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
	MainFrame.BorderSizePixel = 0
	MainFrame.ClipsDescendants = true

	local UICorner = Instance.new("UICorner", MainFrame)
	UICorner.CornerRadius = UDim.new(0, 8)

	local Gradient = Instance.new("UIGradient", MainFrame)
	Gradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 0)),
		ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 255, 0)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 0, 255))
	})
	Gradient.Rotation = 45

	local TitleBar = Instance.new("Frame", MainFrame)
	TitleBar.Size = UDim2.new(1, 0, 0, 40)
	TitleBar.BackgroundTransparency = 1

	local Title = Instance.new("TextLabel", TitleBar)
	Title.Size = UDim2.new(1, -40, 1, 0)
	Title.Position = UDim2.new(0, 10, 0, 0)
	Title.Text = config.Title or "RANOX"
	Title.Font = Enum.Font.GothamBold
	Title.TextSize = 20
	Title.TextColor3 = Color3.fromRGB(255, 255, 255)
	Title.BackgroundTransparency = 1
	Title.TextXAlignment = Enum.TextXAlignment.Left

	local SearchBox = Instance.new("TextBox", TitleBar)
	SearchBox.Size = UDim2.new(0, 120, 0, 24)
	SearchBox.Position = UDim2.new(1, -130, 0.5, -12)
	SearchBox.PlaceholderText = "Pesquisar..."
	SearchBox.Font = Enum.Font.Gotham
	SearchBox.TextSize = 14
	SearchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
	SearchBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	SearchBox.BorderSizePixel = 0
	local SearchUICorner = Instance.new("UICorner", SearchBox)
	SearchUICorner.CornerRadius = UDim.new(0, 6)

	local ContentFrame = Instance.new("ScrollingFrame", MainFrame)
	ContentFrame.Size = UDim2.new(1, -20, 1, -60)
	ContentFrame.Position = UDim2.new(0, 10, 0, 50)
	ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
	ContentFrame.ScrollBarThickness = 4
	ContentFrame.BackgroundTransparency = 1
	ContentFrame.BorderSizePixel = 0

	local UIListLayout = Instance.new("UIListLayout", ContentFrame)
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout.Padding = UDim.new(0, 6)

	local function updateCanvas()
		task.wait()
		ContentFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y)
	end

	UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateCanvas)

	local EnterTween = TweenService:Create(MainFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 500, 0, 420),
		Position = UDim2.new(0.5, 0, 0.5, 0)
	})
	MainFrame.Size = UDim2.new(0, 0, 0, 0)
	EnterTween:Play()

	function RANOX:CreateButton(text, callback)
		local Button = Instance.new("TextButton", ContentFrame)
		Button.Size = UDim2.new(1, -10, 0, 38)
		Button.Text = text
		Button.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
		Button.Font = Enum.Font.GothamBold
		Button.TextSize = 16
		Button.TextColor3 = Color3.fromRGB(255, 255, 255)
		Button.BorderSizePixel = 0
		local Corner = Instance.new("UICorner", Button)
		Corner.CornerRadius = UDim.new(0, 6)

		Button.MouseButton1Click:Connect(function()
			if callback then callback() end
		end)

		return Button
	end

	function RANOX:CreateLabel(text)
		local Label = Instance.new("TextLabel", ContentFrame)
		Label.Size = UDim2.new(1, -10, 0, 30)
		Label.Text = text
		Label.BackgroundTransparency = 1
		Label.Font = Enum.Font.Gotham
		Label.TextSize = 14
		Label.TextColor3 = Color3.fromRGB(255, 255, 255)
		Label.TextXAlignment = Enum.TextXAlignment.Left
		return Label
	end

	local function searchFilter()
		local query = SearchBox.Text:lower()
		for _, child in ipairs(ContentFrame:GetChildren()) do
			if child:IsA("GuiObject") and child ~= UIListLayout then
				child.Visible = (query == "" or string.find((child.Text or ""):lower(), query))
			end
		end
	end

	SearchBox:GetPropertyChangedSignal("Text"):Connect(searchFilter)

	return RANOX
end

return RANOX
