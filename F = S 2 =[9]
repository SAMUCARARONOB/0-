local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

local UI = {}

function UI.Create(config)
	local gui = Instance.new("ScreenGui", game.CoreGui)
	gui.Name = config.Name or "CustomHub"
	gui.ResetOnSpawn = false

	local Window = Instance.new("Frame", gui)
	Window.Size = UDim2.new(0, 600, 0, 400)
	Window.Position = UDim2.new(0.5, -300, 0.5, -200)
	Window.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
	Window.BorderSizePixel = 0
	Window.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.Active = true
	Window.Draggable = true

	local TitleBar = Instance.new("Frame", Window)
	TitleBar.Size = UDim2.new(1, 0, 0, 36)
	TitleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	TitleBar.BorderSizePixel = 0

	local Title = Instance.new("TextLabel", TitleBar)
	Title.Text = config.Title or "Custom Hub"
	Title.TextColor3 = Color3.fromRGB(230, 230, 230)
	Title.Font = Enum.Font.GothamBold
	Title.TextSize = 18
	Title.BackgroundTransparency = 1
	Title.Size = UDim2.new(1, -100, 1, 0)
	Title.Position = UDim2.new(0, 10, 0, 0)
	Title.TextXAlignment = Enum.TextXAlignment.Left

	local BtnClose = Instance.new("TextButton", TitleBar)
	BtnClose.Size = UDim2.new(0, 30, 0, 25)
	BtnClose.Position = UDim2.new(1, -35, 0, 5)
	BtnClose.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	BtnClose.Text = "âœ•"
	BtnClose.TextColor3 = Color3.fromRGB(255, 80, 80)
	BtnClose.Font = Enum.Font.GothamBold
	BtnClose.TextSize = 18
	BtnClose.BorderSizePixel = 0

	BtnClose.MouseButton1Click:Connect(function()
		gui:Destroy()
	end)

	local LeftPanel = Instance.new("Frame", Window)
	LeftPanel.Size = UDim2.new(0, 120, 1, -36)
	LeftPanel.Position = UDim2.new(0, 0, 0, 36)
	LeftPanel.BackgroundColor3 = Color3.fromRGB(18, 18, 25)
	LeftPanel.BorderSizePixel = 0

	local TabButtons = Instance.new("Frame", LeftPanel)
	TabButtons.Size = UDim2.new(1, 0, 1, 0)
	TabButtons.BackgroundTransparency = 1

	local TabList = Instance.new("UIListLayout", TabButtons)
	TabList.Padding = UDim.new(0, 6)
	TabList.SortOrder = Enum.SortOrder.LayoutOrder

	local RightPanel = Instance.new("Frame", Window)
	RightPanel.Size = UDim2.new(1, -120, 1, -36)
	RightPanel.Position = UDim2.new(0, 120, 0, 36)
	RightPanel.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
	RightPanel.BorderSizePixel = 0
	RightPanel.ClipsDescendants = true

	local function CreateScrollingFrame()
		local frame = Instance.new("ScrollingFrame")
		frame.Size = UDim2.new(1, 0, 1, 0)
		frame.CanvasSize = UDim2.new(0, 0, 0, 0)
		frame.ScrollBarThickness = 6
		frame.BackgroundTransparency = 1
		frame.BorderSizePixel = 0
		frame.AutomaticCanvasSize = Enum.AutomaticSize.Y

		local layout = Instance.new("UIListLayout", frame)
		layout.Padding = UDim.new(0, 8)
		layout.SortOrder = Enum.SortOrder.LayoutOrder

		return frame
	end

	local Tabs = {}
	local CurrentTab

	function UI.AddTab(name)
		local tabButton = Instance.new("TextButton", TabButtons)
		tabButton.Size = UDim2.new(1, -10, 0, 30)
		tabButton.Text = name
		tabButton.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
		tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		tabButton.Font = Enum.Font.GothamBold
		tabButton.TextSize = 14
		tabButton.BorderSizePixel = 0

		local indicator = Instance.new("Frame", tabButton)
		indicator.Size = UDim2.new(0, 4, 1, 0)
		indicator.Position = UDim2.new(0, -4, 0, 0)
		indicator.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
		indicator.Visible = false

		local tabContent = CreateScrollingFrame()
		tabContent.Parent = RightPanel
		tabContent.Visible = false

		tabButton.MouseButton1Click:Connect(function()
			for _, tab in pairs(Tabs) do
				tab.Button.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
				tab.Content.Visible = false
				tab.Indicator.Visible = false
			end
			tabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
			tabContent.Visible = true
			indicator.Visible = true
			CurrentTab = tabContent
		end)

		local newTab = {
			Button = tabButton,
			Content = tabContent,
			Indicator = indicator
		}
		table.insert(Tabs, newTab)

		if not CurrentTab then
			tabButton:MouseButton1Click()
		end

		return tabContent
	end

	function UI.AddToggle(tabContent, text, description, callback)
		local frame = Instance.new("Frame", tabContent)
		frame.Size = UDim2.new(1, -20, 0, 40)
		frame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
		frame.BorderSizePixel = 0
		Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 6)

		local label = Instance.new("TextLabel", frame)
		label.Text = text .. "\n" .. description
		label.Size = UDim2.new(1, -60, 1, 0)
		label.Position = UDim2.new(0, 10, 0, 0)
		label.BackgroundTransparency = 1
		label.TextColor3 = Color3.fromRGB(255, 255, 255)
		label.Font = Enum.Font.Gotham
		label.TextSize = 13
		label.TextXAlignment = Enum.TextXAlignment.Left
		label.TextYAlignment = Enum.TextYAlignment.Center
		label.TextWrapped = true

		local switch = Instance.new("Frame", frame)
		switch.Size = UDim2.new(0, 40, 0, 20)
		switch.Position = UDim2.new(1, -50, 0.5, -10)
		switch.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		switch.BorderSizePixel = 0
		Instance.new("UICorner", switch).CornerRadius = UDim.new(1, 0)

		local ball = Instance.new("Frame", switch)
		ball.Size = UDim2.new(0, 16, 0, 16)
		ball.Position = UDim2.new(0, 2, 0.5, -8)
		ball.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
		ball.BorderSizePixel = 0
		Instance.new("UICorner", ball).CornerRadius = UDim.new(1, 0)

		local button = Instance.new("TextButton", switch)
		button.Size = UDim2.new(1, 0, 1, 0)
		button.Text = ""
		button.BackgroundTransparency = 1

		local isOn = false
		button.MouseButton1Click:Connect(function()
			isOn = not isOn
			local toColor = isOn and Color3.fromRGB(170, 0, 0) or Color3.fromRGB(40, 40, 40)
			local toPos = isOn and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
			local ballCol = isOn and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(200, 200, 200)

			TweenService:Create(switch, TweenInfo.new(0.2), {BackgroundColor3 = toColor}):Play()
			TweenService:Create(ball, TweenInfo.new(0.2), {Position = toPos, BackgroundColor3 = ballCol}):Play()

			if callback then callback(isOn) end
		end)
	end

	function UI.SetTitle(newTitle)
		Title.Text = newTitle
	end

	return UI
end

return UI
